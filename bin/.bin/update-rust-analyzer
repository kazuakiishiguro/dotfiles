#!/bin/bash

set -eu

# get arch
if [ "$(uname -m)" = arm64 ]; then
    ARCH="aarch64"
else
    ARCH=$(uname -m)
fi

# get os
case "$OSTYPE" in
    (*"darwin"*)
	TRGT="apple-darwin"
	;;
    (*)
	TRGT="unknown-${OSTYPE}"
	;;esac

echo "Updating rust-analyzer binary for: ${ARCH}-${TRGT}"
curl -sL https://github.com/rust-analyzer/rust-analyzer/releases/latest/download/rust-analyzer-${ARCH}-${TRGT}.gz | zcat > $HOME/.cargo/bin/rust-analyzer
echo "Done! ğŸ¦€"
